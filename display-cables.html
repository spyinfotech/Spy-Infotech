<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Display Cables — SPY Infotech</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <style>
    .product-card {
      background: #1a1a1a;
      border: 1px solid rgba(0, 209, 255, 0.3);
      border-radius: 12px;
      padding: 10px;
      text-align: center;
      box-shadow: 0 4px 15px rgba(0, 209, 255, 0.15);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      height: 100%;
    }
    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 20px rgba(0, 209, 255, 0.4);
    }
    .product-card img {
      width: 100%;
      height: 180px;
      object-fit: contain;
      margin-bottom: 10px;
    }
    .product-price {
      color: #00d1ff;
      font-weight: bold;
      font-size: 1.1rem;
    }
    .pagination button {
      margin: 0 4px;
      background: #151922;
      border: 1px solid #00d1ff;
      color: #00d1ff;
      padding: 6px 12px;
      border-radius: 6px;
      transition: all 0.3s ease;
    }
    .pagination button.active, .pagination button:hover {
      background: #00d1ff;
      color: #000;
    }
    .filter-box {
      background: #151922;
      padding: 15px;
      border-radius: 12px;
      border: 1px solid rgba(0, 209, 255, 0.2);
      margin-bottom: 20px;
    }
    .form-check-label span {
      color: #00d1ff;
      font-weight: 600;
      margin-left: 4px;
    }
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
  <div class="container-fluid">
    <!-- Left: Logo -->
    <a class="navbar-brand d-flex align-items-center" href="index.html">
      <img src="img/logo.png" alt="SPY Logo" height="40" class="me-2" onerror="this.style.display='none'">
      <span>SPY Infotech</span>
    </a>

    <!-- Mobile toggle -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Center + Right -->
    <div class="collapse navbar-collapse" id="navMenu">
      <!-- Center: Nav links -->
      <ul class="navbar-nav position-absolute top-50 start-50 translate-middle">
        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link active" href="categories.html">Categories</a></li>
        <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
      </ul>

      <!-- Right: Search + Social -->
      <div class="ms-auto d-flex align-items-center">
        <form class="d-flex me-3" role="search">
          <input class="form-control search-input" type="search" placeholder="Search" aria-label="Search">
        </form>
        <div class="d-flex">
          <a href="https://wa.me/917066699048" class="nav-link px-2 text-light nav-icon" target="_blank"><i class="fab fa-whatsapp"></i></a>
          <a href="https://www.instagram.com/spy_infotech_official/" class="nav-link px-2 text-light nav-icon" target="_blank"><i class="fab fa-instagram"></i></a>
          <a href="https://www.youtube.com/@SPYInfotech" class="nav-link px-2 text-light nav-icon" target="_blank"><i class="fab fa-youtube"></i></a>
          <a href="mailto:contact.spyinfotech@gmail.com" class="nav-link px-2 text-light nav-icon" target="_blank"><i class="fas fa-envelope"></i></a>
        </div>
      </div>
    </div>
  </div>
</nav>

  <!-- CONTENT -->
  <main class="container-fluid" style="padding-top: 100px;">
    <div class="row">
      <!-- FILTER COLUMN -->
      <aside class="col-md-3 col-lg-2">
        <div class="filter-box" id="filter-sidebar">
          <h5>Filter by Company</h5>
          <div id="company-filters"></div>
        </div>
      </aside>

      <!-- PRODUCTS COLUMN -->
      <section class="col-md-9 col-lg-10">
        <h1 class="mb-4">Display Cables</h1>
        <div class="row g-4" id="product-list"></div>
        <div class="pagination mt-4 d-flex justify-content-center" id="pagination"></div>
      </section>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="pt-5 mt-5">
    <div class="container pt-4">
      <div class="row g-4">
        <div class="col-md-4">
          <h5>Address</h5>
          <p>SPY Infotech, Manewada Road,<br>Nagpur, Maharashtra 440027</p>
        </div>
        <div class="col-md-4">
          <h5>Contact</h5>
          <p>Phone: 7066699048<br>Email: contact.spyinfotech@gmail.com</p>
        </div>
        <div class="col-md-4">
          <h5>Terms & Conditions</h5>
          <p>Goods once sold will not be taken back.<br>Warranty as per manufacturer’s policy.<br>Subject to Nagpur jurisdiction.</p>
        </div>
      </div>
      <hr class="divider my-4">
      <div class="text-center mt-4">
        <a href="https://wa.me/917066699048" target="_blank" class="social-link"><i class="fab fa-whatsapp"></i></a>
        <a href="https://www.instagram.com/spy_infotech_official/" target="_blank" class="social-link"><i class="fab fa-instagram"></i></a>
        <a href="https://www.youtube.com/@SPYInfotech" target="_blank" class="social-link"><i class="fab fa-youtube"></i></a>
        <a href="mailto:contact.spyinfotech@gmail.com" target="_blank" class="social-link"><i class="fas fa-envelope"></i></a>
      </div>
      <div class="text-center pb-4">© 2025 SPY Infotech — Tech you can't find elsewhere</div>
    </div>
  </footer>

  <!-- JS -->
  <script>
  let products = [];
  let filteredProducts = [];
  let currentPage = 1;
  const PRODUCTS_PER_PAGE = 20;

  function getBrand(product) {
    const name = product.name.toLowerCase();
    if (name.includes("lenovo")) return "Lenovo";
    if (name.includes("hp")) return "HP";
    if (name.includes("dell")) return "Dell";
    if (name.includes("asus")) return "ASUS";
    if (name.includes("acer")) return "Acer";
    if (name.includes("msi")) return "MSI";
    if (name.includes("sony")) return "Sony";
    if (name.includes("samsung")) return "Samsung";
    if (name.includes("toshiba")) return "Toshiba";
    if (name.includes("apple")) return "Apple";
    return "Other";
  }

  fetch("data/display-cables.json")
    .then(res => res.json())
    .then(data => {
      products = data;
      filteredProducts = products;
      renderFilters();
      renderProducts();
      renderPagination();
    })
    .catch(err => console.error("Failed to load products:", err));

  function renderFilters() {
    const filterContainer = document.getElementById("company-filters");
    filterContainer.innerHTML = "";

    const brandCounts = {};
    products.forEach(p => {
      const brand = p.brand || getBrand(p) || "Other";
      brandCounts[brand] = (brandCounts[brand] || 0) + 1;
    });

    // Sort brands alphabetically, keep "Other" last
    const sortedBrands = Object.keys(brandCounts)
      .filter(b => b !== "Other")
      .sort()
      .concat("Other");

    sortedBrands.forEach(brand => {
      const count = brandCounts[brand];
      if (!count) return;

      const div = document.createElement("div");
      div.className = "form-check";
      div.innerHTML = `
        <input class="form-check-input" type="checkbox" value="${brand}" id="brand-${brand}">
        <label class="form-check-label" for="brand-${brand}">
          ${brand} <span>(${count})</span>
        </label>
      `;
      filterContainer.appendChild(div);
    });

    document.querySelectorAll("#company-filters input").forEach(cb => {
      cb.addEventListener("change", applyFilters);
    });

    // Clear filter button
    const clearBtn = document.createElement("button");
    clearBtn.textContent = "Clear Filters";
    clearBtn.className = "btn btn-sm btn-outline-light mt-2 w-100";
    clearBtn.onclick = () => {
      document.querySelectorAll("#company-filters input").forEach(cb => (cb.checked = false));
      applyFilters();
    };
    filterContainer.appendChild(clearBtn);
  }

  function applyFilters() {
    const selected = Array.from(
      document.querySelectorAll("#company-filters input:checked")
    ).map(cb => cb.value);

    filteredProducts = selected.length
      ? products.filter(p => selected.includes(p.brand || getBrand(p)))
      : products;

    currentPage = 1;
    renderProducts();
    renderPagination();
  }

  function renderProducts() {
    const container = document.getElementById("product-list");
    container.innerHTML = "";

    const start = (currentPage - 1) * PRODUCTS_PER_PAGE;
    const end = start + PRODUCTS_PER_PAGE;
    const pageProducts = filteredProducts.slice(start, end);

    pageProducts.forEach(p => {
      const col = document.createElement("div");
      col.className = "col-sm-6 col-md-3"; 
      col.innerHTML = `
        <div class="product-card">
          <img src="${p.image}" alt="${p.name}" style="width:100%; height:200px; object-fit:cover;">
          <div class="card-body">
            <h5 class="card-title" title="${p.name}">
              ${truncateText(p.name, 30)}
            </h5>
            <p class="card-text">${truncateText(p.description, 80)}</p>
            <p class="product-price">${p.price}</p>
          </div>
        </div>
      `;
      container.appendChild(col);
    });
  }

  function renderPagination() {
    const pagination = document.getElementById("pagination");
    pagination.innerHTML = "";

    const totalPages = Math.ceil(filteredProducts.length / PRODUCTS_PER_PAGE);
    if (totalPages <= 1) return;

    const maxVisible = 5; // show only 5 page buttons

    const prev = document.createElement("button");
    prev.textContent = "Prev";
    prev.disabled = currentPage === 1;
    prev.addEventListener("click", () => {
      currentPage--;
      renderProducts();
      renderPagination();
    });
    pagination.appendChild(prev);

    let start = Math.max(1, currentPage - Math.floor(maxVisible / 2));
    let end = Math.min(totalPages, start + maxVisible - 1);

    if (end - start + 1 < maxVisible) {
      start = Math.max(1, end - maxVisible + 1);
    }

    for (let i = start; i <= end; i++) {
      const btn = document.createElement("button");
      btn.textContent = i;
      btn.classList.toggle("active", i === currentPage);
      btn.addEventListener("click", () => {
        currentPage = i;
        renderProducts();
        renderPagination();
      });
      pagination.appendChild(btn);
    }

    const next = document.createElement("button");
    next.textContent = "Next";
    next.disabled = currentPage === totalPages;
    next.addEventListener("click", () => {
      currentPage++;
      renderProducts();
      renderPagination();
    });
    pagination.appendChild(next);
  }

  function truncateText(text, maxLength) {
    return text.length > maxLength ? text.substring(0, maxLength) + "..." : text;
  }
</script>
</body>
</html>
